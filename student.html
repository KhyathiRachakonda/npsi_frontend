<!DOCTYPE html>
<html lang="en">


<head>
	<title>Student | Home</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Thasadith" rel="stylesheet">
</head>


<body>








	<style>
	body{
		background-color: rgb(8,112,165);
		font-family: 'Thasadith', sans-serif;
		color: white;
	}
	.navbar{
		background-color: rgb(0,75,114);
	}
	a, a:hover{
		color: white;
	}
	.dropdown{
		color:black;
	}
	.nav>li>a:hover{
		background-color: rgb(49,66,77);
	}
	</style>
	
	
	
	<script>
	
	var settings = {
	  "async": true,
	  "crossDomain": true,
	  "url": "http://npsevents.pythonanywhere.com/event/allEvents/",
	  "method": "GET",
	  "headers": {
		"Content-Type": "application/json",
		"cache-control": "no-cache",
		"Postman-Token": "249a7b90-fe30-40ae-a05a-35848437899b"
	  },
	  "processData": false,
	  "data": "    {\n        \"eventName\": \"volleyball\",\n        \"eventDescription\": \"volleyball team game\",\n        \"eventOwner\": \"Babu\",\n        \"eventStartDate\": \"2019-01-17\",\n        \"eventEndDate\": \"2019-01-19\",\n        \"eventDifficulty\": \"Medium\",\n        \"score\":0\n    }"
	};
	
	
	var response;
	//$http.get(settings.url).then(function(response) {
	//	response = response.data;
	//});

	response = [{"id": 1,"eventName": "volleyball","eventDescription": "volleyball team game","eventOwner": "Babu","eventStartDate": "2019-01-17","eventEndDate": "2019-01-19","eventDifficulty": "Medium","score": "0"},{"id": 2,"eventName": "football","eventDescription": "football team game","eventOwner": "Sabu","eventStartDate": "2019-01-20","eventEndDate": "2019-02-20","eventDifficulty": "Medium","score": "0"}]; 
	
	var i;
	for(i=0;i<response.length;i++){
		var startDate = response[i].eventStartDate;
		var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
		var day = new Date(startDate.slice(0,4),startDate.slice(5,7),startDate.slice(8,10));
		day =  days[day.getDay()];
		response[i].eventStartDay = day;
		console.log(response[i].eventStartDay);
	}
	
	var app = angular.module('allEventsTable', []);
	app.controller('allEvents', function($scope) {
		$scope.allEventsData = response;
	});
	</script>
	
	
	
	
	
	
	<nav class="navbar navbar-expand-md navbar-fixed-top" id="navbar-colour">
		<a class="navbar-brand">The Logo</a>
		<button class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse">
			<span class="glyphicon glyphicon-menu-hamburger"></span>
		</button>
		<div class="collapse navbar-collapse navHeaderCollapse" id="collapse_target">
			<ul class="nav navbar-nav">
				<li><a href="student.html">Home</a></li>
				<li><a href="studentMyEvent.html">My Events</a></li>
				<li><a href="#progressReport">Progress Report</a></li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Notifications</a>
					<ul class="dropdown-menu">
						<span class="dropdown-item-text">one</span>
						<div role="separator" class="dropdown-divider">
						</div>
						<span class="dropdown-item-text">two</span>
						<div role="separator" class="dropdown-divider">
						</div>
						<span class="dropdown-item-text">three</span>
					</ul>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="#">My Profile</a></li>
				<li><a href="login.html">Log Out</a></li>
			</ul>
		</div>
	</nav>
	
	
	
	
	
	<br><br><br>
	<h1 class="text-center">All Events</h2>
	<div class="container" ng-app="allEventsTable" ng-controller="allEvents">
		<table class="table">
			<thead>
				<tr>
					<th>Event Name</th>
					<th>Association Name</th>
					<th>Event Date</th>
					<th>Register</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="event in allEventsData">
					<td>{{ event.eventName }}</td>
					<td>{{ event.eventOwner }}</td>
					<td>{{ event.eventStartDate }} <br> <small> {{ event.eventStartDay }} </small></td>
					<td><button id="register" onclick="register()" class="btn btn-success">Register</button></td>
				</tr>
			</tbody>
		</table>
	</div>
	
	
</body>
</html>